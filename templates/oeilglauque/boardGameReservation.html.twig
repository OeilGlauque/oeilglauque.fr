{% extends 'base.html.twig' %}

{% block customcss %}
    <link rel="stylesheet" href="/css/reservation.css?v=1.1"/>
{% endblock %}

{% block scripts %}
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#board_game_reservation_boardGames').select2({ width: 'resolve' });
        });
    </script>
{% endblock %}

{% block body %}

    <h1 class="titre small">R√©servations de jeux</h1>

    {% if state %}
        <p>
        Bienvenue sur cette page intr√©pide aventurier ! Ici nous vous proposons de venir emprunter des jeux dans notre Ludoth√®que.
        <br />
        La r√©ponse vous sera envoy√©e via l'adresse e-mail renseign√©e sur votre compte. Il faudra fournir des ch√®ques de caution lors du retrait des jeux.
        </p>

        <div class="form">
            {{ form_start(form)  }}

                {{ form_row(form.dateBeg) }}

                {{ form_row(form.dateEnd) }}

                {{ form_label(form.boardGames) }}

                <div class="row">
                        {% for checkbox in form.boardGames.children %}
                            <div class="styled-input-single">
                                {{ form_widget(checkbox) }}
                                {{ form_label(checkbox) }}
                                {{ form_errors(checkbox) }}
                            </div>
                        {% endfor %}
                </div>

                {{ form_row(form.note) }}

                <p id="game-list"></p>
                <div id="price-container">
                    Prix de la caution: <span id="total-price">0</span> ‚Ç¨
                </div>

                {{ form_row(form.save) }}

            {{ form_end(form) }}
        </div>

        <script src="{{ asset('js/selectBoardGames.js') }}"></script>

        <h2>Liste des jeux</h2>
        <table class="reservation">
            <tr>
                <!--<th scope="col">id</th>-->
                <th scope="col">Nom</th>
                <!--
                <th scope="col">Ann√©e</th>
                <th scope="col">Prix</th>
                <th scope="col">Manquant</th>
                <th scope="col">Surplus</th>
                <th scope="col">Note</th>
                -->
            </tr>
            {% for g in boardGames %}
                <tr>
                    <!--<td>{{ g.getId() }}</td>-->
                    <td>{{ g.getName() }}</td>
                    <td>{% if g.getPrice() != null %}{{ g.getPrice() | number_format(2, ',', ' ') }} ‚Ç¨ {% endif %}</td>
                    <td>{{ g.getState() != null ? g.getState() ~ ' √©tat' : 'Etat inconnu' }}</td>

                    <!--
                    <td>{{ g.getYear() }}</td>

                    <td>{{ g.getMissing() }}</td>
                    <td>{{ g.getExcess() }}</td>
                    <td>{{ g.getNote() }}</td>
                    -->
                </tr>
            {% endfor %}
        </table>

        <br>
        <p>N'h√©sitez pas √† <a href="{{ path('contact') }}">nous contacter</a> en cas de doute !</p>
    {% else %}
        <p>Les r√©servations de jeux sont temporairement d√©sactiv√©es üòï</p>
    {% endif %}

{% endblock %}
